---
title: "rainboy的解析"
date: "2024-02-09 11:08"
update: "2023-02-09 11:08"
author: rainboy
home:  https://github.com/rainboylvx
top: true
---

## 解析



容易想到,如果某个人x得到人自己发出去的信息,则图上存在一个环,于是整个问题就变成了求图上最小环的算法.

对题目进行数据抽象(数学建模): 有一个图,$每个点的出度都是1$,求这个图的最小环

1. 如何判断图上存在环?

使用dfs法,在dfs遍历的过程中,如果遇到了一个点x,且`vis[x] == 1`,表示x已经访问过,则这个存在环.

2. 如何求最小环呢?

这个好像,很难,先考虑简单的问题,如何求哪些点在环上呢?

- 直接想到了tarjan求强连通分量!
- 更简单的,使用topsort,把所有的非环上的点,都去除,

好现在知道了: 每个点都在环上,求最小环

**又因为,根据题意,每个点的出度必是1**

从上面的前提条件,得到:

1. 图必有环
2. 图上的环一定是单环

$1$用反证法,

证明1:

因为,每个点的出度为1,所以每个的点都出发一条边,共有$n$边,

根据所学习的树的知识,一个无环图最多有$n-1$条边,所以必有环

证明2:

假定无环,则必存一个条链(路),这个链的结尾的出度为1,与前提矛盾,证毕

$2$用反证法,

如果不存在单环,那么必然存在一个点的出度至少是$2$,与前提矛盾


## 并查集

我看luogu上面的解析有使用并查集的,我很惊奇,这个我没有想出来还要这样做,于是我看了看.


## 代码1

```cpp
<%- include("./rainboy.cpp") _%>
```


## 代码2

使用是tranjan,dfn,对dfs树进行编号的思想,当返祖边存在时,有环,具体看代码

```cpp
<%- include("./rainboy2.cpp") _%>
```
