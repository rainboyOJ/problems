
//1. 加载数据menu
const {flatten_menu_json} = require("../../src/menu.js")


//2.加载nodes数据
//需要的数据有
//
// id, label(显示), title()
// group 分组
// href 这个文章的链接
// pre 每个点的前置节点
//
// 下一节点,通常是题目
// next :[
//
// ]
// 还有edge数据
// console.log(flatten_menu_json)
var nodes = []
var edges = []

for( let d of flatten_menu_json)
{
    // 没有id,说明这个节点,没有加入
    if( ! d.id) continue;
    if( d.pre) {
        edges.push({
            from: d.pre,
            to:d.id
        })
    }

    nodes.push({
        id: d.id,
        title: d.title,
        label: d.label || d.title
    })

    if (d.next) {
        for( let nxt of d.next) {
            nodes.push({
                id: nxt.id,
                title:nxt.title || nxt.id,
                label: nxt.label || nxt.title || nxt.id
            })

            edges.push({
                from:d.id,
                to:nxt.id
            })
        }
    }
}

export const Ns = nodes
export const Es = edges



// 生成edges数据
